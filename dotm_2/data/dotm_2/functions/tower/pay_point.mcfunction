execute at @s if score @s register matches 64.. run summon minecraft:item ~ ~1 ~ {Tags:["update"],PickupDelay:200s,Item:{id:"minecraft:phantom_membrane",Count:64b,tag:{CustomModelData:54,display:{Name:'[{"text":"百層塔點數","color":"dark_aqua","bold":true,"italic":false}]',Lore:['[{"text":"","italic":"false","bold":"false"}]','[{"text":"可在","color":"gray","italic":"false","bold":"false"},{"text":"百層塔","color":"dark_green","italic":"false","bold":"false"},{"text":"和點數兌換商人","color":"gray","italic":"false","bold":"false"}]','[{"text":"兌換獎品。","color":"gray","italic":"false","bold":"false"}]','[{"text":"","italic":"false","bold":"false"}]','[{"text":"","italic":"false","bold":"false"}]','[{"text":"取得方式 : ","color":"red","italic":"false","bold":"true"},{"text":"攻略百層塔","color":"gray","italic":"false","bold":"false"}]','[{"text":"適用職業 : ","color":"red","italic":"false","bold":"true"},{"text":"所有職業","color":"gray","italic":"false","bold":"false"}]']}}}}
execute at @s if score @s register matches 64.. run data modify entity @e[type=minecraft:item,limit=1,tag=update,sort=nearest] Owner set from entity @s UUID
execute at @s if score @s register matches 64.. run data modify entity @e[type=minecraft:item,limit=1,tag=update,sort=nearest] PickupDelay set value 2
execute at @s if score @s register matches 64.. run tag @e[type=minecraft:item,limit=1,tag=update,sort=nearest] remove update
execute at @s if score @s register matches 64.. run scoreboard players remove @s register 64
execute at @s if score @s register matches 1..63 run summon minecraft:item ~ ~1 ~ {Tags:["update"],PickupDelay:200s,Item:{id:"minecraft:phantom_membrane",Count:1b,tag:{CustomModelData:54,display:{Name:'[{"text":"百層塔點數","color":"dark_aqua","bold":true,"italic":false}]',Lore:['[{"text":"","italic":"false","bold":"false"}]','[{"text":"可在","color":"gray","italic":"false","bold":"false"},{"text":"百層塔","color":"dark_green","italic":"false","bold":"false"},{"text":"和點數兌換商人","color":"gray","italic":"false","bold":"false"}]','[{"text":"兌換獎品。","color":"gray","italic":"false","bold":"false"}]','[{"text":"","italic":"false","bold":"false"}]','[{"text":"","italic":"false","bold":"false"}]','[{"text":"取得方式 : ","color":"red","italic":"false","bold":"true"},{"text":"攻略百層塔","color":"gray","italic":"false","bold":"false"}]','[{"text":"適用職業 : ","color":"red","italic":"false","bold":"true"},{"text":"所有職業","color":"gray","italic":"false","bold":"false"}]']}}}}
execute at @s if score @s register matches 1..63 store result entity @e[type=minecraft:item,limit=1,tag=update,sort=nearest] Item.Count byte 1 run scoreboard players get @s register
execute at @s if score @s register matches 1..63 run data modify entity @e[type=minecraft:item,limit=1,tag=update,sort=nearest] Owner set from entity @s UUID
execute at @s if score @s register matches 1..63 run data modify entity @e[type=minecraft:item,limit=1,tag=update,sort=nearest] PickupDelay set value 2
execute at @s if score @s register matches 1..63 run tag @e[type=minecraft:item,limit=1,tag=update,sort=nearest] remove update
execute at @s if score @s register matches 1..63 run scoreboard players set @s register 0
execute if score @s register matches 1.. run function dotm_2:tower/pay_point
